<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Secure File Hosting — Single Page</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header>
    <div class="row-center">
      <nav class="row-center" style="flex:1 1 auto">
        <button onclick="navigate('home')">Home</button>
        <button onclick="navigate('files')">Files</button>
        <button onclick="navigate('register')">Register</button>
        <button onclick="navigate('login')" id="nav-login">Login</button>
        <button onclick="navigate('upload')" id="nav-upload" class="hidden">Upload</button>
        <button onclick="navigate('myfiles')" id="nav-myfiles" class="hidden">My Files</button>
        <button onclick="logout()" id="nav-logout" class="hidden">Logout</button>
      </nav>

      <!-- Share-link search bar -->
      <form id="share-form" class="row-center right" onsubmit="openShare(event)">
        <input id="share-input" class="pill" placeholder="Paste share link or share ID" size="36" />
        <button type="submit">Open</button>
      </form>
    </div>
  </header>

  <main>
    <!-- Home -->
    <section id="view-home" class="card">
      <h1>Secure File Hosting</h1>
      <p>Paste a <b>share link or share ID</b> into the top-right box and press <b>Open</b> to download private files via link.</p>
      <ul class="small">
        <li><b>Files</b> shows <u>public files</u> for everyone.</li>
        <li><b>My Files</b> shows only your uploads (after login) with Download/Delete.</li>
        <li>Private files are never listed publicly; they’re accessible via a unique share link.</li>
      </ul>
      <div id="health" class="small mono"></div>
      <div id="share-status" class="small mono mt-2"></div>
    </section>

    <!-- Files (Public Listing) -->
    <section id="view-files" class="card hidden">
      <h2>Files (Public)</h2>
      <table class="table">
        <thead><tr><th>Name</th><th>Size</th><th>Uploaded</th><th>Action</th></tr></thead>
        <tbody id="tb-files"></tbody>
      </table>
      <pre id="out-files" class="small mono mt-2"></pre>
    </section>

    <!-- Register -->
    <section id="view-register" class="card hidden">
      <h2>Create an account</h2>
      <form id="form-register">
        <label>Username</label><input id="reg-username" required />
        <label>Email</label><input id="reg-email" type="email" required />
        <label>Password</label><input id="reg-password" type="password" minlength="8" required />
        <div class="small muted" id="reg-pass-hint">Tip: Use a long passphrase (e.g., <b>8+ words</b>) with mixed case, numbers, and symbols.</div>
        <div class="small" id="reg-pass-strength"></div>
        <div class="row mt-2"><button type="submit">Register</button></div>
      </form>
      <pre id="out-register" class="small mono mt-2"></pre>
    </section>

    <!-- Login -->
    <section id="view-login" class="card hidden">
      <h2>Login</h2>
      <form id="form-login">
        <label>Email</label><input id="login-email" type="email" required />
        <label>Password</label><input id="login-password" type="password" required />
        <div class="small muted">Tip: Use a <b>long passphrase</b> (e.g., 8+ words). If your password is weak, update it later.</div>
        <div class="row mt-2"><button type="submit">Login</button></div>
      </form>
      <pre id="out-login" class="small mono mt-2"></pre>
    </section>

    <!-- Upload -->
    <section id="view-upload" class="card hidden">
      <h2>Upload a file</h2>
      <form id="form-upload">
        <label>File (PDF or MP4, max <span id="max-mb">20</span>MB)</label>
        <input id="up-file" type="file" accept=".pdf,.mp4" required />
        <div class="small" id="file-size-hint"></div>
        <label class="mt-2">Privacy</label>
        <select id="up-privacy">
          <option value="public">Public</option>
          <option value="private">Private (share link)</option>
        </select>
        <div class="row mt-2">
          <button type="submit">Upload</button>
        </div>
      </form>
      <pre id="out-upload" class="small mono mt-2"></pre>
    </section>

    <!-- My Files (Owner Listing) -->
    <section id="view-myfiles" class="card hidden">
      <h2>My Files</h2>
      <table class="table">
        <thead><tr><th>Name</th><th>Size</th><th>Privacy</th><th>Uploaded</th><th>Share</th><th>Actions</th></tr></thead>
        <tbody id="tb-myfiles"></tbody>
      </table>
      <pre id="out-myfiles" class="small mono mt-2"></pre>
    </section>
  </main>

  <footer><span class="small">&copy; Demo</span></footer>

  <script defer src="./app.js"></script>
</body>
</html>
